{% extends "base.html" %}

{% block title %}CLPs Detectados{% endblock %}

{% block css %}
    <link rel="stylesheet" href="{{ url_for('static', filename='styles/index.css') }}">
{% endblock %}

{% block content %}
    <h1>CLPs Detectados</h1>
    <p>Exibindo {{ clps|length }} CLPs por página.</p>

    <form class="filter-form" method="POST" action="/alterar">
        <label for="clps-per-page-input">CLPs por página:</label>
        <input id="clps-per-page-input" class="form__input" type="number" name="novo_valor" value="{{ valor }}" min="1">
        <button class="form__button" type="submit">Alterar</button>
    </form>

    <div class="clp-grid">
        {% for clp in clps %}
            <article class="clp-card">
                <a href="/clp/{{ clp.IP }}" title="Descrição {{ clp.descricao }} | Portas: {{ clp.PORTAS }}">
                    <img class="clp-card__image" src="{{ url_for('static', filename='imgs/clp_imagem.png') }}" alt="Ícone de um CLP industrial">
                    <div class="clp-card__details">
                        <p class="clp-card__nome">{{ clp.nome }}</p>
                        <p class="clp-card__ip">{{ clp.IP }}</p>
                    </div>
                </a>
            </article>
        {% endfor %}
    </div>

    <div class="pagination">
        {% if page > 1 %}
            <a href="/?page={{ page - 1 }}">« Anterior</a>
        {% endif %}

        <span>Página {{ page }} de {{ total_paginas }}</span>

        {% if page < total_paginas %}
            <a href="/?page={{ page + 1 }}">Próxima »</a>
        {% endif %}
    </div>
{% endblock %}