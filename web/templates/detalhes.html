{% extends "base.html" %}

{% block title %}Detalhes do CLP{% endblock %}

{% block css %}
<link rel="stylesheet" href="{{ url_for('static', filename='styles/detalhes.css') }}">
{% endblock %}

{% block content %}
<div class="status_clp">
    {% if Status == "Conectado" %}
        <span class="status_online">Status: {{ Status }}</span>
        <button>Desconectar</button>
    {% else %}
        <span class="status_offline">Status: {{ Status }}</span>
        <button>Conectar</button>
    {% endif %}
</div>

<div class="informacao_clp">
    <h2>Informações do CLP</h2>
    <ul>
        <li><strong>Modelo:</strong> {{ modelo }}</li>
        <li><strong>Fabricante:</strong> {{ fabricante }}</li>
        <li><strong>IP:</strong> {{ ip }}</li>
        {% if portas_abertas %}
            <li><strong>Portas abertas:</strong>
                {% for porta in portas_abertas %}
                    {% if porta is not none %}
                        {{ porta }}{% if not loop.last %}, {% endif %}
                    {% endif %}
                {% endfor %}
            </li>
        {% else %}
            <li><span class="porta_fechada">Não há portas abertas</span></li>
        {% endif %}
        <li><strong>Versão Firmware:</strong> {{ firmware }}</li>
        <li><strong>Última comunicação:</strong> {{ ultima_comunicacao }}</li>
    </ul>
</div>

<div class="graficos">
    <h2>Monitoramento</h2>
    <div class="linha-graficos">
        <div class="grafico-container"><canvas id="graficoCpu"></canvas></div>
        <div class="grafico-container"><canvas id="graficoMemoria"></canvas></div>
    </div>
    <div class="linha-graficos">
        <div class="grafico-container"><canvas id="graficoRede"></canvas></div>
        <div class="grafico-container"><canvas id="graficoDisco"></canvas></div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="{{ url_for('static', filename='scripts/sidebar.js') }}"></script>
<script src="{{ url_for('static', filename='scripts/graficos.js') }}"></script>
{% endblock %}
